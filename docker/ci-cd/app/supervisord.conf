[supervisord]
nodaemon=true
user=cicd
logfile=/logs/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/logs

[unix_http_server]
file=/tmp/supervisor.sock
chmod=0700
chown=cicd:cicd

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:gitsync]
command=python3 /app/gitsync/gitsync_service.py
directory=/workspace
autostart=true
autorestart=true
stderr_logfile=/logs/gitsync-error.log
stdout_logfile=/logs/gitsync-output.log
user=cicd
environment=PYTHONPATH="/app"

[program:precommit1c]
command=python3 /app/precommit1c/precommit_service.py
directory=/workspace
autostart=true
autorestart=true
stderr_logfile=/logs/precommit1c-error.log
stdout_logfile=/logs/precommit1c-output.log
user=cicd
environment=PYTHONPATH="/app"

[program:health-check]
command=python3 /app/shared/health_check.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/logs/health-check-error.log
stdout_logfile=/logs/health-check-output.log
user=cicd
environment=PYTHONPATH="/app"

[program:pipeline-coordinator]
command=python3 /app/pipeline_coordinator_service.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/logs/pipeline-coordinator-error.log
stdout_logfile=/logs/pipeline-coordinator-output.log
user=cicd
environment=PYTHONPATH="/app"

[program:api-server]
command=python3 /app/api_server.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/logs/api-server-error.log
stdout_logfile=/logs/api-server-output.log
user=cicd
environment=PYTHONPATH="/app"
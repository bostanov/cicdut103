# Задачи по настройке GitLab

## Цель
Полностью настроить GitLab для работы с CI/CD системой 1С

## Задачи

### 1. Проверка готовности GitLab
- [ ] 1.1 Проверить статус контейнера gitlab-cicd
- [ ] 1.2 Дождаться полной инициализации (может занять 5-10 минут)
- [ ] 1.3 Проверить доступность веб-интерфейса http://localhost:8929
- [ ] 1.4 Проверить доступность API

### 2. Получение root токена
- [ ] 2.1 Получить начальный пароль root из контейнера
- [ ] 2.2 Войти в систему через веб-интерфейс
- [ ] 2.3 Создать Personal Access Token с правами: api, read_repository, write_repository
- [ ] 2.4 Сохранить токен в secrets/gitlab_token.txt

### 3. Создание проектов
- [ ] 3.1 Создать проект ut103-ci (основная конфигурация)
- [ ] 3.2 Создать проект ut103-external-files (внешние файлы)
- [ ] 3.3 Настроить visibility (private)
- [ ] 3.4 Включить CI/CD для обоих проектов

### 4. Настройка CI/CD пайплайнов
- [ ] 4.1 Создать .gitlab-ci.yml для ut103-ci
  - Стадии: build, test, sonarqube-check
  - Интеграция с SonarQube
  - Уведомления в Redmine
- [ ] 4.2 Создать .gitlab-ci.yml для ut103-external-files
  - Стадии: parse, analyze, report
  - Интеграция с SonarQube
  - Уведомления в Redmine

### 5. Настройка переменных окружения
- [ ] 5.1 Добавить SONARQUBE_URL
- [ ] 5.2 Добавить SONARQUBE_TOKEN
- [ ] 5.3 Добавить REDMINE_URL
- [ ] 5.4 Добавить REDMINE_API_KEY

### 6. Настройка webhooks
- [ ] 6.1 Создать webhook для интеграции с Redmine
- [ ] 6.2 Создать webhook для уведомлений о пайплайнах
- [ ] 6.3 Протестировать webhooks

### 7. Инициализация репозиториев
- [ ] 7.1 Инициализировать ut103-ci с README.md
- [ ] 7.2 Инициализировать ut103-external-files с README.md
- [ ] 7.3 Создать структуру папок
- [ ] 7.4 Добавить .gitignore

### 8. Тестирование
- [ ] 8.1 Создать тестовый коммит в ut103-ci
- [ ] 8.2 Проверить запуск пайплайна
- [ ] 8.3 Проверить интеграцию с SonarQube
- [ ] 8.4 Проверить уведомления в Redmine

## Критерии готовности
- ✅ GitLab доступен и работает
- ✅ Созданы оба проекта
- ✅ Настроены пайплайны CI/CD
- ✅ Работает интеграция с SonarQube
- ✅ Работает интеграция с Redmine
- ✅ Тестовый пайплайн выполнен успешно

# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CI/CD —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞**: 12 –Ω–æ—è–±—Ä—è 2025  
**–í—Ä–µ–º—è**: 19:15

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. PostgreSQL
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ
- **–ü–æ—Ä—Ç**: 5433
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: gitlab, redmine, sonarqube, cicd
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –°–æ–∑–¥–∞–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Health**: HEALTHY

### 2. Redmine
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- **URL**: http://localhost:3000 (HTTP 200)
- **API Key**: YOUR_REDMINE_API_KEY_HERE
- **–ü—Ä–æ–µ–∫—Ç**: ut103-ci (ID: 1)
- **–î–æ—Å—Ç—É–ø**: ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ API —Ä–∞–±–æ—Ç–∞—é—Ç

### 3. GitLab
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
- **URL**: http://localhost:8929 (HTTP 302)
- **Root**: root / Xk8mP2nQ9vL5wR3t
- **Token**: YOUR_GITLAB_TOKEN_HERE
- **–í–µ—Ä—Å–∏—è**: 16.11.10
- **–ü—Ä–æ–µ–∫—Ç—ã**: 
  - ut103-ci (ID: 1) ‚úÖ
  - ut103-external-files (ID: 2) ‚úÖ
- **CI/CD**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚úÖ
- **–î–æ—Å—Ç—É–ø**: ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ API —Ä–∞–±–æ—Ç–∞—é—Ç

## ‚úÖ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### GitLab –Ω–µ –æ—Ç–≤–µ—á–∞–ª (–†–ï–®–ï–ù–û)
**–ü—Ä–æ–±–ª–µ–º–∞:**
- HTTP –∫–æ–¥ 502 Bad Gateway
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ Docker (–±—ã–ª–æ 1.92 GB)

**–†–µ—à–µ–Ω–∏–µ:**
1. ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∞ –ø–∞–º—è—Ç—å Docker –¥–æ 11.68 GB
2. ‚úÖ –°–æ–∑–¥–∞–Ω root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–µ—Ä–µ–∑ Rails console
3. ‚úÖ –°–æ–∑–¥–∞–Ω Personal Access Token
4. ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø—Ä–æ–µ–∫—Ç—ã —á–µ—Ä–µ–∑ API
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã

**–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–æ, GitLab —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redmine ‚è≥
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: `curl.exe http://localhost:3000`
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å unhealthy
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API: `curl.exe -H "X-Redmine-API-Key: YOUR_REDMINE_API_KEY_HERE" http://localhost:3000/projects.json`

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å SonarQube ‚è≥
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `docker-compose up -d sonarqube`
- –î–æ–∂–¥–∞—Ç—å—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (5-10 –º–∏–Ω—É—Ç)
- –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhooks üîÑ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ GitLab –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Redmine
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è SonarQube
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å CI/CD pipeline üß™
- –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç –≤ ut103-ci
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø–∞–π–ø–ª–∞–π–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ Redmine
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –≤ SonarQube

### 5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å 1–° üîß
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ 1–°
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `scripts/init_redmine.py` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Redmine ‚úÖ
- `scripts/quick_init_redmine.py` - –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Redmine ‚úÖ
- `scripts/create_test_issue.py` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∑–∞–¥–∞—á–∏ ‚úÖ
- `scripts/enable_redmine_api.py` - –í–∫–ª—é—á–µ–Ω–∏–µ API Redmine ‚úÖ
- `scripts/init_gitlab.py` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è GitLab ‚è≥

### –°–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- `scripts/create_gitlab_token.py` - –ß–µ—Ä–µ–∑ API (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - 502)
- `scripts/create_gitlab_token_direct.py` - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - timeout)
- `scripts/create_gitlab_token_rails.sh` - –ß–µ—Ä–µ–∑ Rails console (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - timeout)
- `scripts/create_token.rb` - Ruby —Å–∫—Ä–∏–ø—Ç (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - timeout)
- `scripts/create_token_final.py` - –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - timeout)
- `scripts/create_token_oauth.py` - –ß–µ—Ä–µ–∑ OAuth (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - 502)

### –£—Ç–∏–ª–∏—Ç—ã
- `scripts/wait_for_gitlab.ps1` - –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ GitLab
- `scripts/restart_docker.ps1` - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Docker Desktop
- `scripts/create_token_api.ps1` - PowerShell –≤–µ—Ä—Å–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `GITLAB_MANUAL_SETUP.md` - –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ GitLab
- `GITLAB_TOKEN_MANUAL.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é ‚≠ê
- `scripts/gitlab_setup_tasks.md` - –ü–ª–∞–Ω –∑–∞–¥–∞—á –ø–æ GitLab
- `CURRENT_STATUS.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `templates/.gitlab-ci-main.yml` - CI/CD –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- `templates/.gitlab-ci-external.yml` - CI/CD –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤

## üéØ –¢–µ–∫—É—â–∞—è —Ü–µ–ª—å

**–ü–æ–ª—É—á–∏—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π GitLab —Å Personal Access Token**

–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã, —Ç–∞–∫ –∫–∞–∫ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:
- –°–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —á–µ—Ä–µ–∑ API
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **PostgreSQL**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (100%)
- **Redmine**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω (100%)
- **GitLab**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω (100%)
- **SonarQube**: ‚è≥ –û–∂–∏–¥–∞–µ—Ç (~1 —á–∞—Å)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: ‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (~2 —á–∞—Å–∞)

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: ~70% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```powershell
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps

# –õ–æ–≥–∏ GitLab (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫)
docker logs gitlab-cicd --tail 50

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ GitLab
docker exec gitlab-cicd gitlab-ctl status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
curl.exe http://localhost:8929
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```powershell
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ GitLab
docker restart gitlab-cicd

# –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (3 –º–∏–Ω—É—Ç—ã)
Start-Sleep -Seconds 180

# –ü—Ä–æ–≤–µ—Ä–∫–∞
curl.exe http://localhost:8929
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è GitLab)
```powershell
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–µ—Å–ª–∏ GitLab —Ä–∞–±–æ—Ç–∞–µ—Ç)
python scripts/create_token_oauth.py

# –í—Ä—É—á–Ω—É—é - —Å–º. GITLAB_TOKEN_MANUAL.md
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ—Å—å!** –ü—Ä–æ–±–ª–µ–º–∞ —Å GitLab —Ä–µ—à–∞–µ–º–∞
2. **–£–≤–µ–ª–∏—á—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã Docker** - —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ
3. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç** –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ GitLab
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞** - —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ
5. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** - –æ–Ω–∏ –ø–æ–∫–∞–∂—É—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –ø—Ä–æ–±–ª–µ–º—ã

## üìû –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ GitLab –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã Docker Desktop (–º–∏–Ω–∏–º—É–º 8GB RAM)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker logs gitlab-cicd --tail 100`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `docker exec gitlab-cicd gitlab-ctl status`
4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
5. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GitLab –≤ –æ–±–ª–∞–∫–µ (gitlab.com) –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

# 1C CI/CD Monorepo

–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ 1–°:–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π 10.3

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ config-src/          # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ 1–° (XML)
‚îú‚îÄ‚îÄ externals/           # –í–Ω–µ—à–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç—á–µ—Ç—ã (–≤—ã–≥—Ä—É–∂–µ–Ω—ã)
‚îú‚îÄ‚îÄ externals-src/       # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ (XML)
‚îú‚îÄ‚îÄ ci/                  # CI/CD –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ scripts/         # PowerShell —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ docs/                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ CI-CD/           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ CI/CD
‚îú‚îÄ‚îÄ build/               # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ (–Ω–µ –≤ Git)
‚îÇ   ‚îú‚îÄ‚îÄ audit/           # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ ib/              # –í—Ä–µ–º–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞
‚îÇ   ‚îî‚îÄ‚îÄ cf/              # –°–æ–±—Ä–∞–Ω–Ω—ã–µ cf-—Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .gitlab-ci.yml       # GitLab CI/CD Pipeline
‚îî‚îÄ‚îÄ sonar-project.properties  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SonarQube
```

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

- **PostgreSQL** (port 5432) - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è SonarQube –∏ Redmine
- **GitLab CE** (ports 8929, 2224) - Git-—Å–µ—Ä–≤–µ—Ä –∏ CI/CD
- **SonarQube** (port 9000) - –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ 1–° (—Å BSL plugin)
- **Redmine** (port 3000) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **1C:Enterprise 8.3** - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ 1–°
- **Git** - –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **GitLab Runner** - –ó–∞–ø—É—Å–∫ CI/CD –∑–∞–¥–∞—á
- **OneScript** - –°–∫—Ä–∏–ø—Ç–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- **GitSync3** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ 1–° —Å Git
- **precommit1c** - Pre-commit —Ö—É–∫–∏ –¥–ª—è 1–°
- **SonarScanner** - –ö–ª–∏–µ–Ω—Ç –¥–ª—è SonarQube

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Windows 10/11
- Docker Desktop
- 1C:Enterprise 8.3.12+
- PowerShell 5.1+

### 2. –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```powershell
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd 1C-CI-CD

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞—É–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
powershell -ExecutionPolicy Bypass -File ci/scripts/audit-tools.ps1

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –û–° (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
# –°–º. docs/CI-CD/MANUAL-STAGE-0.md

# 4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
powershell -ExecutionPolicy Bypass -File ci/scripts/deploy-postgres.ps1
powershell -ExecutionPolicy Bypass -File ci/scripts/deploy-gitlab.ps1
powershell -ExecutionPolicy Bypass -File ci/scripts/deploy-sonarqube.ps1
```

### 3. –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

- **GitLab**: http://localhost:8929 (root / —Å–º. build/audit/gitlab-config.json)
- **SonarQube**: http://localhost:9000 (admin / admin)
- **Redmine**: http://localhost:3000

## CI/CD Pipeline

Pipeline –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

1. **Validate** - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ 1–°
2. **Build** - –°–±–æ—Ä–∫–∞ cf-—Ñ–∞–π–ª–∞
3. **Test** - –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ SonarQube
4. **Deploy** - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–º. `.gitlab-ci.yml` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ 1–°

```powershell
# –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
powershell -ExecutionPolicy Bypass -File ci/scripts/export-from-storage.ps1
```

### –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
git add config-src/
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
```

### –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞

–ü–æ—Å–ª–µ push GitLab CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∞–Ω–∞–ª–∏–∑ –≤ SonarQube.
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤: http://localhost:9000

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[STATUS.md](STATUS.md)** - üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **[QUICKSTART.md](QUICKSTART.md)** - üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –∫–æ–º–∞–Ω–¥—ã
- [–°–≤–æ–¥–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](docs/CI-CD/DEPLOYMENT-SUMMARY.md) - –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏
- [–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é](docs/CI-CD/IMPROVEMENT-PROPOSALS.md) - ‚≠ê –ê–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- [–û—Ç—á–µ—Ç –æ–± –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏](docs/CI-CD/AUTOMATION-REPORT.md) - –ß—Ç–æ –±—ã–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- [–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É](docs/CI-CD/CHANGING-REPOSITORY-PATH.md)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Stage 0 (—Ä—É—á–Ω–∞—è)](docs/CI-CD/MANUAL-STAGE-0.md)
- [–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](docs/CI-CD/INSTALLATION-GUIDE.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](docs/CI-CD/USAGE-GUIDE.md)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ GitLab –∏–ª–∏ Redmine.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–µ–∫—Ç. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.


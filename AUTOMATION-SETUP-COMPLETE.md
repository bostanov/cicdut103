# –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è CI/CD –¥–ª—è 1C:–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π 10.3

## ‚úÖ –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. GitSync Service (–°–ª—É–∂–±–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π 1C –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å Git
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º 1C
  - –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Git
  - –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ SonarQube –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 2. Precommit1C Service (–°–ª—É–∂–±–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∫–∞—Ç–∞–ª–æ–≥ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª**: –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (.epf, .erf, .bsl, .txt)
  - –†–∞–∑–±–æ—Ä —Ñ–∞–π–ª–æ–≤ –Ω–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏
  - –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥
  - –ö–æ–º–º–∏—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –≤ Git
  - –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ SonarQube

### 3. GitLab Runner Service (–°–ª—É–∂–±–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è CI/CD)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏ CI/CD pipeline
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ jobs
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ pipeline –ø—Ä–∏ –∫–æ–º–º–∏—Ç–∞—Ö
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GitLab

### 4. SonarQube Integration (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- **–¢—Ä–∏–≥–≥–µ—Ä—ã**:
  - –ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ GitSync
  - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ Precommit1C
  - –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ pipeline jobs

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–ª—É–∂–± (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):
```powershell
.\install-all-services.ps1 install
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–ª—É–∂–±:
```powershell
.\install-all-services.ps1 status
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–ª—É–∂–±:
```powershell
.\install-all-services.ps1 start
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–ª—É–∂–±:
```powershell
.\install-all-services.ps1 stop
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–ª—É–∂–±:
```powershell
.\install-all-services.ps1 restart
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```
C:\1C-CI-CD\
‚îú‚îÄ‚îÄ ci\scripts\
‚îÇ   ‚îú‚îÄ‚îÄ gitsync-service.ps1              # –†–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç GitSync
‚îÇ   ‚îú‚îÄ‚îÄ precommit1c-service.ps1         # –†–∞–±–æ—á–∏–π —Å–∫—Ä–∏–ø—Ç Precommit1C
‚îÇ   ‚îú‚îÄ‚îÄ install-gitsync-service.ps1     # –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ GitSync
‚îÇ   ‚îú‚îÄ‚îÄ install-precommit1c-service.ps1 # –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ Precommit1C
‚îÇ   ‚îú‚îÄ‚îÄ install-runner-service.ps1      # –£—Å—Ç–∞–Ω–æ–≤—â–∏–∫ Runner
‚îÇ   ‚îú‚îÄ‚îÄ trigger-sonar-analysis.ps1       # –ó–∞–ø—É—Å–∫ SonarQube
‚îÇ   ‚îî‚îÄ‚îÄ update-service-config.ps1        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ externals\                           # –ö–∞—Ç–∞–ª–æ–≥ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ processed\                       # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ sources\                         # –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏
‚îú‚îÄ‚îÄ logs\                                # –õ–æ–≥–∏ —Å–ª—É–∂–±
‚îÇ   ‚îú‚îÄ‚îÄ gitsync-service.log
‚îÇ   ‚îú‚îÄ‚îÄ precommit1c-service.log
‚îÇ   ‚îî‚îÄ‚îÄ sonar-analysis.log
‚îî‚îÄ‚îÄ install-all-services.ps1            # –ì–ª–∞–≤–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª—É–∂–± –≤ `ci\config\ci-settings.json`:
```json
{
  "services": {
    "gitsync": {
      "enabled": true,
      "syncIntervalMinutes": 5,
      "logFile": "C:\\1C-CI-CD\\logs\\gitsync-service.log",
      "serviceName": "GitSync-1C-Service"
    },
    "precommit1c": {
      "enabled": true,
      "checkIntervalSeconds": 30,
      "logFile": "C:\\1C-CI-CD\\logs\\precommit1c-service.log",
      "serviceName": "Precommit1C-Service",
      "externalFilesDir": "C:\\1C-CI-CD\\externals",
      "processedFilesDir": "C:\\1C-CI-CD\\externals\\processed",
      "sourcesDir": "C:\\1C-CI-CD\\externals\\sources"
    },
    "runner": {
      "enabled": true,
      "serviceName": "GitLab-Runner-1C",
      "configFile": "C:\\Tools\\gitlab-runner\\config.toml"
    },
    "sonar": {
      "enabled": true,
      "projectKey": "ut103-ci",
      "logFile": "C:\\1C-CI-CD\\logs\\sonar-analysis.log",
      "autoTrigger": true
    }
  }
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ —Å–ª—É–∂–±:
- **GitSync**: `C:\1C-CI-CD\logs\gitsync-service.log`
- **Precommit1C**: `C:\1C-CI-CD\logs\precommit1c-service.log`
- **SonarQube**: `C:\1C-CI-CD\logs\sonar-analysis.log`

### –°—Ç–∞—Ç—É—Å —Å–ª—É–∂–± Windows:
- **GitSync-1C-Service**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º 1C
- **Precommit1C-Service**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤
- **GitLab-Runner-1C**: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ CI/CD –∑–∞–¥–∞—á

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. **GitSync** –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ 1C
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å Git
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç SonarQube –∞–Ω–∞–ª–∏–∑

2. **Precommit1C** –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—Ç–∞–ª–æ–≥ `externals\`
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏
   - –ö–æ–º–º–∏—Ç–∏—Ç –≤ Git
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç SonarQube –∞–Ω–∞–ª–∏–∑

3. **GitLab Runner** –ø–æ—Å—Ç–æ—è–Ω–Ω–æ:
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç CI/CD jobs
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç pipeline –∑–∞–¥–∞—á–∏

4. **SonarQube** –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é:
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Quality Gate
   - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç—ã

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- **–ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –í—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ 1C –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ Git
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –í–Ω–µ—à–Ω–∏–µ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ SonarQube
- **CI/CD Pipeline**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! –í—Å–µ —Å–ª—É–∂–±—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
